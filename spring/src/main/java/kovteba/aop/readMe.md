# AOP

- [Концепции АОП](#Концепции-АОП)
- [Типы АОП](#Типы-АОП)
    - [Использование статического АОП](#Использование-статического-АОП)
    - [Использование динамического АОП](#Использование-динамического-АОП)
- [](#)
---
- [Что такое AOP? Как это относиться к IoC?](#Что-такое-AOP?-Как-это-относиться-к-IoC?)
- [Что такое Aspect, Advice, Pointcut, JointPoint и Advice Arguments в АОП?](#Что-такое-Aspect,-Advice,-Pointcut,-JointPoint-и-Advice-Arguments-в-АОП?)
- [В чем разница между Spring AOP и AspectJ АОП?](#В-чем-разница-между-Spring-AOP-и-AspectJ-АОП?)
- [](#)
- [](#)


## Концепции АОП
В следующем списке приведены ключевые концепции АОП.   
- __Точки соединения__. Точка соединения Uoiлpoint) - это четко определенная точка во время выполнения 
    приложения. Типовые примеры точек соединения включают обращение к методу, собственно вызов 
    метода (Method Invocation), инициализацию класса и создание экземпляра объекта. Точки соединения 
    являются ключевой концепцией АОП и определяют места в приложении, в которые можно вставлять 
    дополнительную логику с применением АОП.
- __Советы__. Фрагмент кода, который должен выполняться в отдельной точке соединения, представляет 
    собой совет (advice), определенный методом в к лассе. Существует много типов советов, среди 
    которых перед, когда совет выполняется до точки соединения, и после, когда совет выполняется 
    после точки соединения.
- __Срезы__. Срез (pointcut) - это коллекция точек соединения, которая используется для определения 
    ситуации, когда совет должен быть выполнен. Создавая срезы, вы получаете точный контроль над тем, 
    как применять совет к компонентам приложения. Как упоминалось ранее, типичной точкой соединения
    является вызов метода или коллекция всех вызовов методов в отдельном классе. Часто между срезами 
    можно устанавливать сложные отношения, чтобы дополнительно ограничить то, когда будет выполнен совет.
- __Аспекты__. Аспект (aspect) - это комбинация совета и срезов, инкапсулированных в классе. Такая 
    комбинация дает в результате определение логики, которая должна быть включена в приложение, и 
    указание мест, где она должна выполняться.
- __Связывание__. Связывание (weaving) представляет собой процесс вставки аспектов в определенную точку 
    внутри кода приложения. Для решений АОП времени компиляции связывание обычно делается на этапе сборки. 
    Подобным же образом для решений АОП времени выполнения связывание происходит динамически во время 
    выполнения. В AspectJ поддерживается еще один механизм связывания, называемый связыванием во время 
    загрузки (load-time weaving - LTW), при котором перехватывается лежащий в основе загрузчик классов 
    JVM и обеспечивается связывание с байт-кодом, когда он загружается загрузчиком классов.

---

## Типы АОП
### Использование статического АОП
При статическом АОП процесс связывания формирует еще один шаг внутр процесса сборки приложения. В терминах 
Java процесс связывания при статической реализации АОП предусматривает модификацию действительного байт-кода 
приложения, должным образом изменяя и расширяя код приложения. Это хороший способ выполнения процесса 
связывания, поскольку конечным результатом является просто байт-код Java, и нет необходимости предпринимать 
специальные трюки вовремя выполнения, чтобы определить, когда должен быть применен совет.     
Недостаток такого механизма связан с тем, что любые изменения, вносимые в аспекты, даже если они касаются 
всего лишь добавления еще одной точки соединения, требуют перекомпиляции всего приложения. Прекрасным 
примером статической реализации АОП может служить связывание во время компиляции в AspectJ.

### Использование динамического АОП
Динамические реализации АОП, подобные АОП в Spring, отличаются от статических реализаций в том, что процесс 
связывания происходит динамически во время выполнения. Способ достижения этого зависит от реализации, 
но, как вы увидите, применяемый в Spring подход заключается в создании прокси для всех целевых объектов, 
позволяя совету вызываться требуемым образом. Недостаток динамического АОП связан с тем, что оно обычно 
не выполняется настолько хорошо, как статическое АОП, однако производительность неуклонно растет. 
Основным преимуществом применения динамических реализаций АОП является простота изменения целого
набора аспектов в приложении без необходимости в повторной компиляции кода приложения.

---

## Что такое AOP? Как это относиться к IoC?
__Аспектно-ориентированное программирование (АОП)__ - парадигма программирования, основанная на идее разделения 
функциональности для улучшения разбиения программы на модули. AOP и Spring - взаимодополняющие технологии, которые 
позволяют решать сложные проблемы путем разделения функционала на отдельные модули. АОП предоставляет возможность 
реализации сквозной логики - т.е. логики, которая применяется к множеству частей приложения - в одном месте и 
обеспечения автоматического применения этой логики по всему приложению. Подход Spring к АОП заключается в создании 
"динамических прокси" для целевых объектов и "привязывании" объектов к конфигурированному совету для выполнения 
сквозной логики.

---

## Что такое Aspect, Advice, Pointcut, JointPoint и Advice Arguments в АОП?
Основные понятия АОП:
- __Аспект__ (англ. aspect) - модуль или класс, реализующий сквозную функциональность. Аспект изменяет поведение 
    остального кода, применяя совет в точках соединения, определённых некоторым срезом.
- __Совет__ (англ. advice) - фрагмент кода, который должен выполняться в отдельной точке соединения. Существует 
    несколько типов советов, совет может быть выполнен до, после или вместо точки соединения.
- __Точка соединения__ (англ. joinpoint) - это четко определенная точка в выполняемой программе, где следует 
    применить совет. Типовые примеры точек соединения включают обращение к методу, собственно Method Invocation, и
    нициализацию класса и создание экземпляра объекта. Многие реализации АОП позволяют использовать вызовы методов 
    и обращения к полям объекта в качестве точек соединения.
- __Срез__ (англ. pointcut) - набор точек соединения. Срез определяет, подходит ли данная точка соединения к данному 
    совету. Самые удобные реализации АОП используют для определения срезов синтаксис основного языка (например, в 
    AspectJ применяются Java-сигнатуры) и позволяют их повторное использование с помощью переименования и комбинирования.
- __Связывание__(англ. weaving) представляет собой процесс действительной вставки аспектов в определенную точку 
    кода приложения. Для решений АОП времени компиляции это делается на этапе компиляции, обычно в виде 
    дополнительного шага процесса сборки. Аналогично, для решений АОП времени выполнения связывание происходит 
    динамически во время выполнения. В AspectJ поддерживается еще один механизм связывания под названием связывание 
    во время загрузки (load-time weaving - LTW), который перехватывает лежащий в основе загрузчик классов JVM и 
    обеспечивает связывание с байт-кодом, когда он загружается загрузчиком классов.
- __Цель__(англ. target) - это объект, поток выполнения которого изменяется каким-то процессом АОП. На целевой 
    объект часто ссылаются как на объект, снабженный советом.
- __Внедрение__ (англ. introduction, введение) - представляет собой процесс, посредством которого можно изменить 
    структуру объекта за счет введения в него дополнительных методов или полей, изменение иерархии наследования 
    для добавления функциональности аспекта в инородный код. Обычно реализуется с помощью некоторого метаобъектного 
    протокола (англ. metaobject protocol, MOP).
    
---
    
## В чем разница между Spring AOP и AspectJ АОП?
AspectJ де-факто является стандартом реализации АОП. Реализация АОП от Spring имеет некоторые отличия:
- Spring AOP немного проще, т.к. нет необходимости следить за процессом связывания.
- Spring AOP поддерживает аннотации AspectJ, таким образом мы можем работать в спринг проекте похожим образом с 
    AspectJ проектом.
- Spring AOP поддерживает только proxy-based АОП и может использовать только один тип точек соединения - Method 
    Invocation. AspectJ поддерживает все виды точек соединения.
- Недостатком Spring AOP является работа только со своими бинами, которые существуют в Spring Context.